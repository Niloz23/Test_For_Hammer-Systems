# Referral System

## Описание функционала

**Реферальная система** позволяет пользователям:

### 1. Авторизация по номеру телефона
- Пользователь вводит номер телефона.
- Генерируется и отправляется **4-значный код подтверждения** (эмуляция).
- Пользователь вводит код для завершения авторизации.
- При первом входе создается новый пользователь в базе данных.

### 2. Работа с реферальными кодами
- При создании каждого пользователя автоматически генерируется **уникальный 6-значный инвайт-код** (цифры и символы).
- Пользователь может ввести чужой инвайт-код, чтобы зарегистрироваться как реферал.

### 3. Управление рефералами
- В профиле пользователя отображается:
  - Личный **реферальный код**.
  - Инвайт-код, который пользователь активировал (если есть).
  - Список номеров телефонов пользователей, которые использовали его реферальный код.

---

## API

API предоставляет следующие эндпоинты:

### 1. **Авторизация по номеру телефона**
- **URL**: `/api/login/`
- **Метод**: `POST`
- **Описание**: Отправка кода подтверждения на номер телефона и завершение авторизации.
  
**Пример запроса:**
json
```
{
  "phone_number": "+1234567890"
}
```
Ответ:
json
```
{
  "message": "OTP sent"
}
```
### 2. **Регистрация пользователя с инвайт-кодом**
- **URL**: `/api/register/`
- **Метод**: `POST`
- **Описание**: Создание нового пользователя с уникальным инвайт-кодом и возможностью ввода реферального кода.
  
**Пример запроса:**
```
{
  "otp": "1234"
}
```

Ответ:
```
{
  "user_id": 1,
  "created": true
}
```
### 3. **Получение информации о профиле пользователя**
- **URL**: `/api/profile/{user_id}/`
- **Метод**: `GET`
- **Описание**: Получение информации о пользователе, включая его реферальный код, активированный инвайт-код и список рефералов.
  
**Пример запроса:**

```
{
  "id": 1,
  "phone_number": "+1234567890",
  "invite_code": "AB12CD",
  "referred_by": "XY34ZQ",
  "referred_users": [
    "+0987654321",
    "+1122334455"
  ]
}
```
### 4. **Активация инвайт-кода**
- **URL**: `/api/profile/{user_id}/`
- **Метод**: `POST`
- **Описание**:Позволяет пользователю ввести реферальный код..
  
**Пример запроса:**

```
{
  "invite_code": "XY34ZQ"
}
```
Ответ:

```
{
  "message": "Referral code activated"
}
```
Если код уже был использован:


```
{
  "error": "Referral code already used"
}
```
Если код не найден:

json
```
{
  "error": "Invalid invite code"
}
```
Тестирование API
Все эндпоинты можно протестировать через Postman:

Импортируйте файл postman_collection.json в Postman.
Запустите соответствующие запросы по шагам:
Авторизация (/login/ → /verify/).
Работа с профилем (/profile/<user_id>/).
*не выполнил часть с загрузкой проекта на pythonanywhere так как чтобы загрузить проект на PostgreSQL нужно платная подписка я такой не имею, так что прошу оценить мой проект без этого пункта*
